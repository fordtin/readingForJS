<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Document</title>
<link rel="stylesheet" href="index4.css" />
</head>
<body>

 <!-- 第一个选项卡 -->
<div class="tab J_tab">
    <ul class="tab-menuWrapper">
        <li class="J_tab-menu">menu1-1</li>
        <li class="J_tab-menu">menu1-2</li>
        <li class="J_tab-menu underline">menu1-3</li>
    </ul>
    <div class="tab-contentWrapper">
        <div class="J_tab-content"><div>content1-1 <ul><li>abc</li></ul></div></div>
        <div class="J_tab-content" style="display: none;" ><p>content1-2</p><div>abc</div></div>
        <div class="J_tab-content" style="display: none;" >content1-3</div>
    </div>
</div>
 <!-- 第二个选项卡 -->
<div class="tab J_tab">
    <ul class="tab-menuWrapper">
        <li class="J_tab-menu tab-currentMenu">menu2-1</li>
        <li class="J_tab-menu">menu2-2</li>
    </ul>
    <div class="tab-contentWrapper">
        <div class="J_tab-content"><div>content2-1 <ul><li>abc</li></ul></div></div>
        <div class="J_tab-content" style="display: none;" ><p>content2-2</p><div>abc</div></div>
    </div>
</div>
 <!-- 第三个选项卡 -->
<div class="tab J_tab">
    <ul class="tab-menuWrapper">
        <li class="J_tab-menu tab-currentMenu2">menu3-1</li>
        <li class="J_tab-menu">menu3-2</li>
        <li class="J_tab-menu">menu3-3</li>
        <li class="J_tab-menu">menu3-4</li>
        <li class="J_tab-menu">menu3-5</li>
    </ul>
    <div class="tab-contentWrapper">
        <div class="J_tab-content"><div>content3-1 <ul><li>abc</li></ul></div></div>
        <div class="J_tab-content" style="display: none;" ><p>content3-2</p><div>abc</div></div>
        <div class="J_tab-content" style="display: none;" ><p>content3-3</p><div>abc</div></div>
        <div class="J_tab-content" style="display: none;" ><p>content3-4</p><div>abc</div></div>
        <div class="J_tab-content" style="display: none;" ><p>content3-5</p><div>abc</div></div>
    </div>
</div>

<script>
var GLOBAL = {};
GLOBAL.namespace = function(str) {
    var arr = str.split("."),
        o = GLOBAL;
    for(i = (arr[0] == "GLOBAL") ? 1 : 0; i < arr.length; i++) {
        o[arr[i]] = o[arr[i]] || {};
        o = o[arr[i]];
    }
};
GLOBAL.namespace("Dom");
GLOBAL.Dom.getElementsByClassName = function(str, root, tag) {
    if(root) {
        root = typeof root == 'string' ? document.getElementById(root) : root;
    }
    else {
        root = document.body;
    }
    tag = tag || '*';
    var eles = root.getElementsByTagName(tag), // 获取父容器下所有标签
        arr = [];
    for(var i = 0, n = eles.length; i < n; i++) {
        for(var j = 0, k = eles[i].className.split(' '), l = k.length; j < l; j++) {
            if(k[j] == str) {
                arr.push(eles[i]);
                break;
            }
        }
    }
    return arr;
};  
// 添加class
GLOBAL.Dom.addClass = function(node, str) {
    if(!new RegExp("(^|\\s+)"+str).test(node.className)) {
        node.className = node.className + ' ' + str;
    }
};
// 移除class
GLOBAL.Dom.removeClass = function(node, str) {
    node.className = node.className.replace(new RegExp("(^|\\s+)" + str), '');
};




function setTab(root) {
    // 获得tabMenu和tabContent的DOM节点，并保存在变量中
    var tabMenus = GLOBAL.Dom.getElementsByClassName('J_tab-menu', root),
        tabContents = GLOBAL.Dom.getElementsByClassName('J_tab-content', root);
    //遍历数组，让 tabMenu 监听 click 事件
    for(var i = 0; i < tabMenus.length; i++) {
        tabMenus[i]._index = i;
        tabMenus[i].onclick = function() {
            for(var j = 0; j < tabContents.length; j++) {
                tabContents[j].style.display = 'none';
            }
            tabContents[this._index].style.display = 'block';
        /*
            // 如果有当前选中标签，则去掉“tab-currentMenu”
            var currentMenu = GLOBAL.Dom.getElementsByClassName('tab-currentMenu', root)[0];
            if(currentMenu) {
                GLOBAL.Dom.removeClass(currentMenu, 'tab-currentMenu');
            }
            GLOBAL.Dom.addClass(this, 'tab-currentMenu');
            */
        }
    }
}

//当前标签挂上高亮样式1
function setTab2(root) {
    // 获得tabMenu和tabContent的DOM节点，并保存在变量中
    var tabMenus = GLOBAL.Dom.getElementsByClassName('J_tab-menu', root),
        tabContents = GLOBAL.Dom.getElementsByClassName('J_tab-content', root);
    //遍历数组，让 tabMenu 监听 click 事件
    for(var i = 0; i < tabMenus.length; i++) {
        tabMenus[i]._index = i;
        tabMenus[i].onclick = function() {
            for(var j = 0; j < tabContents.length; j++) {
                tabContents[j].style.display = 'none';
            }
            tabContents[this._index].style.display = 'block';
            // 如果有当前选中标签，则去掉“tab-currentMenu”
            var currentMenu = GLOBAL.Dom.getElementsByClassName('tab-currentMenu', root)[0];
            if(currentMenu) {
                // currentMenu.className = currentMenu.className.replace(new RegExp("(^|\\s+)tab-currentMenu"), '');
                GLOBAL.Dom.removeClass(currentMenu, 'tab-currentMenu');
            }
        /*  if(!new RegExp("(^|\\s+)tab-currentMenu").test(this.className)) {
                this.className = this.className + ' tab-currentMenu'; //给当前被点击的按钮挂上当前选中的 class
            }*/
            GLOBAL.Dom.addClass(this, 'tab-currentMenu');
        }
    }
}

//当前标签挂上高亮样式2
function setTab3(root) {
    // 获得tabMenu和tabContent的DOM节点，并保存在变量中
    var tabMenus = GLOBAL.Dom.getElementsByClassName('J_tab-menu', root),
        tabContents = GLOBAL.Dom.getElementsByClassName('J_tab-content', root);
    //遍历数组，让 tabMenu 监听 click 事件
    for(var i = 0; i < tabMenus.length; i++) {
        tabMenus[i]._index = i;
        tabMenus[i].onclick = function() {
            for(var j = 0; j < tabContents.length; j++) {
                tabContents[j].style.display = 'none';
            }
            tabContents[this._index].style.display = 'block';
            // 如果有当前选中标签，则去掉“tab-currentMenu”
            var currentMenu = GLOBAL.Dom.getElementsByClassName('tab-currentMenu2', root)[0];
            if(currentMenu) {
                // currentMenu.className = currentMenu.className.replace(new RegExp("(^|\\s+)tab-currentMenu"), '');
                GLOBAL.Dom.removeClass(currentMenu, 'tab-currentMenu2');
            }
        /*  if(!new RegExp("(^|\\s+)tab-currentMenu").test(this.className)) {
                this.className = this.className + ' tab-currentMenu'; //给当前被点击的按钮挂上当前选中的 class
            }*/
            GLOBAL.Dom.addClass(this, 'tab-currentMenu2');
        }
    }
}

var tabs = GLOBAL.Dom.getElementsByClassName('J_tab');
setTab(tabs[0]);
setTab2(tabs[1]);
setTab3(tabs[2]);











</script>
</body>
</html>